<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本智能分析 - 高校纪检审计监管一体化平台</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/text-analysis.css">
</head>
<body>
    <div class="container">
        <!-- 顶部导航 -->
        <header class="header">
            <div class="header-left">
                <h1>📄 文本智能分析</h1>
            </div>
            <div class="header-right">
                <button class="btn btn-secondary" onclick="window.location.href='index.html'">返回首页</button>
            </div>
        </header>

        <!-- 主要内容 -->
        <main class="main-content">
            <!-- 分析类型选择 -->
            <div class="card">
                <div class="card-header">
                    <h3>选择分析类型</h3>
                </div>
                <div class="card-body">
                    <div class="analysis-type-selector">
                        <button class="type-btn active" data-type="meeting_minutes">
                            📋 会议纪要分析
                        </button>
                        <button class="type-btn" data-type="tender_document">
                            📢 招标文件分析
                        </button>
                        <button class="type-btn" data-type="contract">
                            📝 合同文本分析
                        </button>
                        <button class="type-btn" data-type="batch">
                            📦 批量文档分析
                        </button>
                    </div>
                </div>
            </div>

            <!-- 单文档分析区域 -->
            <div id="singleAnalysisArea" class="card">
                <div class="card-header">
                    <h3 id="analysisTitle">会议纪要分析</h3>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="clearInput()">清空</button>
                        <button class="btn btn-primary" onclick="analyzeSingleDocument()">开始分析</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="input-area">
                        <textarea id="documentInput" placeholder="请输入或粘贴文本内容..." rows="15"></textarea>
                        <div class="input-info">
                            <span id="charCount">0</span> 字符
                        </div>
                    </div>
                </div>
            </div>

            <!-- 批量分析区域 -->
            <div id="batchAnalysisArea" class="card" style="display: none;">
                <div class="card-header">
                    <h3>批量文档分析</h3>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="clearBatchDocuments()">清空列表</button>
                        <button class="btn btn-primary" onclick="startBatchAnalysis()">开始批量分析</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="batch-upload-area">
                        <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                            <div class="upload-icon">📁</div>
                            <p>点击添加文档或拖拽文件到此处</p>
                            <p class="upload-hint">支持 .txt 文件</p>
                        </div>
                        <input type="file" id="fileInput" multiple accept=".txt" style="display: none;" onchange="handleFileSelect(event)">
                    </div>
                    <div id="documentList" class="document-list"></div>
                </div>
            </div>

            <!-- 分析结果区域 -->
            <div id="resultArea" class="card" style="display: none;">
                <div class="card-header">
                    <h3>分析结果</h3>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="exportResult()">导出结果</button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="resultContent"></div>
                </div>
            </div>

            <!-- 敏感词管理 -->
            <div class="card">
                <div class="card-header">
                    <h3>敏感词管理</h3>
                    <button class="btn btn-secondary btn-sm" onclick="toggleSensitiveWordsPanel()">
                        <span id="toggleIcon">▼</span> 展开/收起
                    </button>
                </div>
                <div id="sensitiveWordsPanel" class="card-body" style="display: none;">
                    <div class="sensitive-words-grid">
                        <div class="word-category">
                            <h4>🚫 腐败类</h4>
                            <div id="corruptionWords" class="word-list"></div>
                        </div>
                        <div class="word-category">
                            <h4>⚠️ 歧视类</h4>
                            <div id="discriminationWords" class="word-list"></div>
                        </div>
                        <div class="word-category">
                            <h4>❌ 违规类</h4>
                            <div id="violationWords" class="word-list"></div>
                        </div>
                        <div class="word-category">
                            <h4>👥 关系类</h4>
                            <div id="relationshipWords" class="word-list"></div>
                        </div>
                        <div class="word-category">
                            <h4>💰 财务类</h4>
                            <div id="financialWords" class="word-list"></div>
                        </div>
                    </div>
                    <div class="add-word-form">
                        <select id="wordCategory">
                            <option value="corruption">腐败类</option>
                            <option value="discrimination">歧视类</option>
                            <option value="violation">违规类</option>
                            <option value="relationship">关系类</option>
                            <option value="financial">财务类</option>
                        </select>
                        <input type="text" id="newWord" placeholder="输入新的敏感词">
                        <button class="btn btn-primary btn-sm" onclick="addSensitiveWord()">添加</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/common.js"></script>
    <script src="js/text-analysis-service.js"></script>
    <script src="js/text-analysis.js"></script>
</body>
</html>
