# æ•°æ®å®‰å…¨ç­–ç•¥æ‰§è¡Œæœºåˆ¶

## æ¦‚è¿°

å®‰å…¨ç­–ç•¥ä¸æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼Œå®ƒéœ€è¦ä¸**æ•°æ®åˆ†çº§åˆ†ç±»ç³»ç»Ÿ**ç»“åˆï¼Œé€šè¿‡ç­–ç•¥å¼•æ“åœ¨æ•°æ®è®¿é—®ã€æ“ä½œæ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

## æ ¸å¿ƒé—®é¢˜è§£ç­”

### Q1: å®‰å…¨ç­–ç•¥ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿ

å®‰å…¨ç­–ç•¥åœ¨ä»¥ä¸‹åœºæ™¯è‡ªåŠ¨è§¦å‘ï¼š

#### 1. æ•°æ®è®¿é—®æ—¶ ğŸ”
```javascript
// ç”¨æˆ·æŸ¥è¯¢æ•°æ®æ—¶
SELECT * FROM student_info WHERE id = 123
â†“
è§¦å‘ï¼šè®¿é—®æ§åˆ¶ç­–ç•¥
æ£€æŸ¥ï¼šç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥è¡¨
æ‰§è¡Œï¼šèº«ä»½è®¤è¯ã€æƒé™éªŒè¯
è®°å½•ï¼šè®¿é—®æ—¥å¿—
```

#### 2. æ•°æ®å±•ç¤ºæ—¶ ğŸ‘ï¸
```javascript
// æ•°æ®è¿”å›ç»™å‰ç«¯æ—¶
{
  name: "å¼ ä¸‰",
  id_card: "110101199001011234"
}
â†“
è§¦å‘ï¼šæ•°æ®è„±æ•ç­–ç•¥
æ£€æŸ¥ï¼šè¯¥å­—æ®µæ˜¯å¦éœ€è¦è„±æ•
æ‰§è¡Œï¼šèº«ä»½è¯å·è„±æ•
è¿”å›ï¼š{ name: "å¼ ä¸‰", id_card: "110101********1234" }
```

#### 3. æ•°æ®å¯¼å‡ºæ—¶ ğŸ“¤
```javascript
// ç”¨æˆ·å¯¼å‡ºæ•°æ®æ—¶
exportData(tableName, filters)
â†“
è§¦å‘ï¼šå¯¼å‡ºå®¡è®¡ç­–ç•¥
æ£€æŸ¥ï¼šæ˜¯å¦éœ€è¦å®¡æ‰¹
æ‰§è¡Œï¼šè®°å½•å¯¼å‡ºæ—¥å¿—ã€æ–‡ä»¶åŠ å¯†
é€šçŸ¥ï¼šç®¡ç†å‘˜å®¡æ‰¹
```

#### 4. æ•°æ®ä¿®æ”¹æ—¶ âœï¸
```javascript
// æ›´æ–°æ•°æ®æ—¶
UPDATE financial_data SET amount = 10000
â†“
è§¦å‘ï¼šå˜æ›´å®¡è®¡ç­–ç•¥
æ£€æŸ¥ï¼šæ˜¯å¦æœ‰ä¿®æ”¹æƒé™
æ‰§è¡Œï¼šè®°å½•å˜æ›´å‰åå€¼
ä¿å­˜ï¼šå®¡è®¡æ—¥å¿—
```

#### 5. æ•°æ®å¤‡ä»½æ—¶ ğŸ’¾
```javascript
// å®šæ—¶å¤‡ä»½ä»»åŠ¡
scheduledBackup()
â†“
è§¦å‘ï¼šæ•°æ®å¤‡ä»½ç­–ç•¥
æ‰§è¡Œï¼šåŠ å¯†å¤‡ä»½ã€å¼‚åœ°å­˜å‚¨
éªŒè¯ï¼šå¤‡ä»½å®Œæ•´æ€§
è®°å½•ï¼šå¤‡ä»½æ—¥å¿—
```

### Q2: æ€ä¹ˆçŸ¥é“å“ªäº›æ˜¯æ ¸å¿ƒæ•°æ®ï¼Ÿ

é€šè¿‡**æ•°æ®åˆ†çº§åˆ†ç±»ç³»ç»Ÿ**æ¥è¯†åˆ«ï¼š

#### æ–¹æ³•1: åŸºäºæ•°æ®åˆ†ç±» ğŸ“Š

```javascript
// æ•°æ®åˆ†ç±»è¡¨ï¼ˆdata-classification.htmlï¼‰
{
  tableName: "financial_transaction",
  category: "è´¢åŠ¡æ•°æ®",        // åˆ†ç±»
  level: "L4",                 // çº§åˆ«ï¼šL4-æœºå¯†
  fields: ["amount", "account"] // å…³é”®å­—æ®µ
}

// ç­–ç•¥åŒ¹é…
if (table.level === "L4") {
  // è¿™æ˜¯æ ¸å¿ƒæ•°æ®ï¼Œåº”ç”¨é«˜çº§åˆ«ç­–ç•¥
  applyPolicy("æ•°æ®åŠ å¯†ç­–ç•¥");
  applyPolicy("è®¿é—®æ§åˆ¶ç­–ç•¥");
}
```

#### æ–¹æ³•2: åŸºäºå­—æ®µè¯†åˆ« ğŸ”

```javascript
// æ•æ„Ÿå­—æ®µè¯†åˆ«
const sensitiveFields = [
  "id_card",      // èº«ä»½è¯
  "phone",        // æ‰‹æœºå·
  "bank_card",    // é“¶è¡Œå¡
  "password",     // å¯†ç 
  "salary",       // è–ªèµ„
  "account"       // è´¦å·
];

// è‡ªåŠ¨è¯†åˆ«
if (sensitiveFields.includes(fieldName)) {
  // è¿™æ˜¯æ•æ„Ÿå­—æ®µï¼Œåº”ç”¨è„±æ•ç­–ç•¥
  applyMaskingRule(fieldName);
}
```

#### æ–¹æ³•3: åŸºäºè¡¨åæ¨¡å¼ ğŸ“

```javascript
// æ ¸å¿ƒæ•°æ®è¡¨æ¨¡å¼
const coreDataPatterns = [
  /^financial_/,    // è´¢åŠ¡ç›¸å…³
  /^salary_/,       // è–ªèµ„ç›¸å…³
  /^audit_/,        // å®¡è®¡ç›¸å…³
  /_secret$/,       // æœºå¯†æ•°æ®
  /_confidential$/  // ä¿å¯†æ•°æ®
];

// æ¨¡å¼åŒ¹é…
if (coreDataPatterns.some(pattern => pattern.test(tableName))) {
  // è¿™æ˜¯æ ¸å¿ƒæ•°æ®è¡¨
  applyHighSecurityPolicy();
}
```

## å®Œæ•´çš„ç­–ç•¥æ‰§è¡Œæµç¨‹

### æµç¨‹å›¾

```
ç”¨æˆ·æ“ä½œï¼ˆæŸ¥è¯¢/ä¿®æ”¹/å¯¼å‡ºï¼‰
    â†“
1. è¯†åˆ«æ•°æ®ç±»å‹
   - æŸ¥è¯¢æ•°æ®åˆ†ç±»è¡¨
   - è·å–æ•°æ®çº§åˆ«ï¼ˆL1-L4ï¼‰
   - è¯†åˆ«æ•æ„Ÿå­—æ®µ
    â†“
2. åŒ¹é…å®‰å…¨ç­–ç•¥
   - æ ¹æ®æ•°æ®çº§åˆ«åŒ¹é…ç­–ç•¥
   - æ ¹æ®æ“ä½œç±»å‹åŒ¹é…ç­–ç•¥
   - æ ¹æ®ç”¨æˆ·è§’è‰²åŒ¹é…ç­–ç•¥
    â†“
3. æ‰§è¡Œç­–ç•¥æ£€æŸ¥
   - è®¿é—®æ§åˆ¶ï¼šéªŒè¯æƒé™
   - æ•°æ®è„±æ•ï¼šæ ‡è®°éœ€è„±æ•å­—æ®µ
   - å®¡è®¡ç›‘æ§ï¼šå‡†å¤‡æ—¥å¿—è®°å½•
    â†“
4. æ‰§è¡Œæ“ä½œ
   - å…è®¸ï¼šæ‰§è¡Œå¹¶åº”ç”¨ç­–ç•¥
   - æ‹’ç»ï¼šè¿”å›é”™è¯¯ä¿¡æ¯
    â†“
5. åå¤„ç†
   - æ•°æ®è„±æ•å¤„ç†
   - è®°å½•å®¡è®¡æ—¥å¿—
   - è§¦å‘å‘Šè­¦ï¼ˆå¦‚æœ‰å¼‚å¸¸ï¼‰
```

## å®é™…åº”ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯

```javascript
// 1. ç”¨æˆ·æ“ä½œ
const result = await query("SELECT * FROM student_info WHERE id = 123");

// 2. ç³»ç»Ÿè¯†åˆ«
const classification = getDataClassification("student_info");
// { category: "ä¸ªäººä¿¡æ¯", level: "L3", fields: ["name", "id_card", "phone"] }

// 3. åŒ¹é…ç­–ç•¥
const policies = getPoliciesByLevel("L3");
// [
//   { name: "è®¿é—®æ§åˆ¶ç­–ç•¥", type: "è®¿é—®æ§åˆ¶" },
//   { name: "æ•°æ®è„±æ•ç­–ç•¥", type: "æ•°æ®è„±æ•" },
//   { name: "å®¡è®¡æ—¥å¿—ç­–ç•¥", type: "å®¡è®¡ç›‘æ§" }
// ]

// 4. æ‰§è¡Œè®¿é—®æ§åˆ¶
if (!checkPermission(user, "student_info", "READ")) {
  throw new Error("æ— æƒè®¿é—®è¯¥æ•°æ®");
}

// 5. æ‰§è¡Œæ•°æ®è„±æ•
result.id_card = maskIdCard(result.id_card);  // 110101********1234
result.phone = maskPhone(result.phone);        // 138****5678

// 6. è®°å½•å®¡è®¡æ—¥å¿—
auditLog({
  user: user.name,
  action: "æŸ¥è¯¢",
  resource: "student_info",
  result: "æˆåŠŸ",
  time: new Date()
});

// 7. è¿”å›ç»“æœ
return result;
```

### ç¤ºä¾‹2: å¯¼å‡ºè´¢åŠ¡æ•°æ®

```javascript
// 1. ç”¨æˆ·æ“ä½œ
exportData("financial_transaction", { date: "2024-10" });

// 2. ç³»ç»Ÿè¯†åˆ«
const classification = getDataClassification("financial_transaction");
// { category: "è´¢åŠ¡æ•°æ®", level: "L4", fields: ["amount", "account"] }

// 3. åŒ¹é…ç­–ç•¥ï¼ˆL4çº§åˆ« - æœ€é«˜å®‰å…¨çº§åˆ«ï¼‰
const policies = getPoliciesByLevel("L4");
// [
//   { name: "å¯¼å‡ºå®¡æ‰¹ç­–ç•¥", rules: "éœ€è¦äºŒçº§å®¡æ‰¹" },
//   { name: "æ•°æ®åŠ å¯†ç­–ç•¥", rules: "å¯¼å‡ºæ–‡ä»¶å¿…é¡»åŠ å¯†" },
//   { name: "å®¡è®¡ç›‘æ§ç­–ç•¥", rules: "è®°å½•è¯¦ç»†æ—¥å¿—" }
// ]

// 4. æ‰§è¡Œå®¡æ‰¹æµç¨‹
const approval = await requestApproval({
  user: user.name,
  resource: "financial_transaction",
  action: "å¯¼å‡º",
  level: "L4"
});

if (!approval.approved) {
  throw new Error("å¯¼å‡ºç”³è¯·æœªé€šè¿‡å®¡æ‰¹");
}

// 5. æ‰§è¡Œå¯¼å‡ºï¼ˆåŠ å¯†ï¼‰
const data = await fetchData("financial_transaction", filters);
const encryptedFile = encryptData(data, "AES-256");

// 6. è®°å½•å®¡è®¡æ—¥å¿—
auditLog({
  user: user.name,
  action: "å¯¼å‡º",
  resource: "financial_transaction",
  recordCount: data.length,
  approver: approval.approver,
  result: "æˆåŠŸ",
  time: new Date()
});

// 7. è¿”å›åŠ å¯†æ–‡ä»¶
return encryptedFile;
```

## ç­–ç•¥ä¸æ•°æ®åˆ†ç±»çš„æ˜ å°„å…³ç³»

### æ˜ å°„è¡¨

| æ•°æ®çº§åˆ« | æ•°æ®ç±»å‹ | åº”ç”¨ç­–ç•¥ | æ‰§è¡Œè§„åˆ™ |
|---------|---------|---------|---------|
| L4-æœºå¯† | è´¢åŠ¡æ•°æ®ã€è–ªèµ„ | è®¿é—®æ§åˆ¶<br>æ•°æ®åŠ å¯†<br>å®¡è®¡ç›‘æ§ | å¤šé‡è®¤è¯<br>å¼ºåˆ¶åŠ å¯†<br>å®Œæ•´å®¡è®¡ |
| L3-æ•æ„Ÿ | ä¸ªäººä¿¡æ¯ã€ç§‘ç ” | è®¿é—®æ§åˆ¶<br>æ•°æ®è„±æ•<br>å®¡è®¡ç›‘æ§ | èº«ä»½è®¤è¯<br>æ•æ„Ÿå­—æ®µè„±æ•<br>è®¿é—®æ—¥å¿— |
| L2-å†…éƒ¨ | ä¸šåŠ¡æ•°æ® | è®¿é—®æ§åˆ¶<br>å®¡è®¡ç›‘æ§ | è§’è‰²æƒé™<br>åŸºç¡€æ—¥å¿— |
| L1-å…¬å¼€ | å…¬å‘Šã€æ–°é—» | å®¡è®¡ç›‘æ§ | ç®€å•æ—¥å¿— |

### é…ç½®ç¤ºä¾‹

```javascript
// ç­–ç•¥é…ç½®è¡¨
const policyMapping = {
  "L4": {
    policies: [
      "æ•°æ®åŠ å¯†ç­–ç•¥",
      "è®¿é—®æ§åˆ¶ç­–ç•¥", 
      "å®¡è®¡ç›‘æ§ç­–ç•¥",
      "æ•°æ®å¤‡ä»½ç­–ç•¥"
    ],
    rules: {
      authentication: "å¤šå› ç´ è®¤è¯",
      encryption: "AES-256",
      audit: "å®Œæ•´å®¡è®¡",
      approval: "äºŒçº§å®¡æ‰¹"
    }
  },
  "L3": {
    policies: [
      "è®¿é—®æ§åˆ¶ç­–ç•¥",
      "æ•°æ®è„±æ•ç­–ç•¥",
      "å®¡è®¡ç›‘æ§ç­–ç•¥"
    ],
    rules: {
      authentication: "èº«ä»½è®¤è¯",
      masking: "æ•æ„Ÿå­—æ®µè„±æ•",
      audit: "è®¿é—®æ—¥å¿—"
    }
  },
  "L2": {
    policies: [
      "è®¿é—®æ§åˆ¶ç­–ç•¥",
      "å®¡è®¡ç›‘æ§ç­–ç•¥"
    ],
    rules: {
      authentication: "åŸºç¡€è®¤è¯",
      audit: "åŸºç¡€æ—¥å¿—"
    }
  },
  "L1": {
    policies: [
      "å®¡è®¡ç›‘æ§ç­–ç•¥"
    ],
    rules: {
      audit: "ç®€å•æ—¥å¿—"
    }
  }
};
```

## ç­–ç•¥å¼•æ“å®ç°

### æ ¸å¿ƒä»£ç ç»“æ„

```javascript
// ç­–ç•¥å¼•æ“
class SecurityPolicyEngine {
  
  // æ‰§è¡Œç­–ç•¥æ£€æŸ¥
  async executePolicy(operation) {
    // 1. è¯†åˆ«æ•°æ®
    const dataInfo = this.identifyData(operation.resource);
    
    // 2. è·å–é€‚ç”¨ç­–ç•¥
    const policies = this.getApplicablePolicies(dataInfo, operation);
    
    // 3. æ‰§è¡Œç­–ç•¥
    for (const policy of policies) {
      await this.applyPolicy(policy, operation, dataInfo);
    }
    
    // 4. è®°å½•å®¡è®¡
    this.recordAudit(operation, dataInfo, policies);
  }
  
  // è¯†åˆ«æ•°æ®
  identifyData(resource) {
    // ä»æ•°æ®åˆ†ç±»ç³»ç»Ÿè·å–ä¿¡æ¯
    const classification = dataClassificationService.getByTableName(resource);
    
    return {
      tableName: resource,
      category: classification.category,
      level: classification.level,
      sensitiveFields: classification.fields
    };
  }
  
  // è·å–é€‚ç”¨ç­–ç•¥
  getApplicablePolicies(dataInfo, operation) {
    // æ ¹æ®æ•°æ®çº§åˆ«å’Œæ“ä½œç±»å‹è·å–ç­–ç•¥
    const policies = dataSecurityService.getPolicies({
      level: dataInfo.level,
      type: operation.type,
      status: 'enabled'
    });
    
    return policies;
  }
  
  // åº”ç”¨ç­–ç•¥
  async applyPolicy(policy, operation, dataInfo) {
    switch (policy.type) {
      case 'è®¿é—®æ§åˆ¶':
        return this.checkAccess(operation.user, dataInfo);
      case 'æ•°æ®è„±æ•':
        return this.maskData(operation.data, dataInfo.sensitiveFields);
      case 'æ•°æ®åŠ å¯†':
        return this.encryptData(operation.data);
      case 'å®¡è®¡ç›‘æ§':
        return this.auditOperation(operation);
      default:
        console.warn('æœªçŸ¥ç­–ç•¥ç±»å‹:', policy.type);
    }
  }
}
```

## é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šé…ç½®æ•°æ®åˆ†ç±»

åœ¨ `data-classification.html` é¡µé¢ï¼š

1. åˆ›å»ºæ•°æ®åˆ†ç±»ï¼ˆå¦‚ï¼šè´¢åŠ¡æ•°æ®ï¼‰
2. è®¾ç½®æ•°æ®çº§åˆ«ï¼ˆå¦‚ï¼šL4-æœºå¯†ï¼‰
3. é…ç½®å…³é”®å­—æ®µï¼ˆå¦‚ï¼šamount, accountï¼‰

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®‰å…¨ç­–ç•¥

åœ¨ `data-security-management.html` é¡µé¢ï¼š

1. åˆ›å»ºç­–ç•¥ï¼ˆå¦‚ï¼šæ•°æ®åŠ å¯†ç­–ç•¥ï¼‰
2. é€‰æ‹©ç­–ç•¥ç±»å‹ï¼ˆå¦‚ï¼šæ•°æ®åŠ å¯†ï¼‰
3. è®¾ç½®å®‰å…¨çº§åˆ«ï¼ˆå¦‚ï¼šé«˜ï¼‰
4. é…ç½®é€‚ç”¨èŒƒå›´ï¼ˆå¦‚ï¼šæ‰€æœ‰L4çº§åˆ«æ•°æ®ï¼‰
5. é€‰æ‹©æ‰§è¡Œè§„åˆ™ï¼ˆå¦‚ï¼šå­˜å‚¨åŠ å¯†ï¼‰

### ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹æ˜ å°„å…³ç³»

```javascript
// åœ¨ç­–ç•¥çš„"é€‚ç”¨èŒƒå›´"å­—æ®µä¸­æŒ‡å®š
é€‚ç”¨èŒƒå›´: "æ•°æ®çº§åˆ«=L4" æˆ– "æ•°æ®åˆ†ç±»=è´¢åŠ¡æ•°æ®"
```

### ç¬¬å››æ­¥ï¼šå¯ç”¨ç­–ç•¥

å‹¾é€‰"ç«‹å³å¯ç”¨è¯¥ç­–ç•¥"ï¼Œç­–ç•¥å¼€å§‹ç”Ÿæ•ˆã€‚

## ç›‘æ§å’ŒéªŒè¯

### æŸ¥çœ‹ç­–ç•¥æ‰§è¡Œæƒ…å†µ

1. åˆ‡æ¢åˆ°"å®¡è®¡æ—¥å¿—"æ ‡ç­¾é¡µ
2. æŸ¥çœ‹ç­–ç•¥è§¦å‘è®°å½•
3. åˆ†æç­–ç•¥æ‰§è¡Œæ•ˆæœ

### ç»Ÿè®¡ä¿¡æ¯

- ä»Šæ—¥è®¿é—®æ¬¡æ•°
- ç­–ç•¥åº”ç”¨æ¬¡æ•°
- å¼‚å¸¸è®¿é—®å‘Šè­¦
- æ•°æ®å¯¼å‡ºè®°å½•

## æœ€ä½³å®è·µ

### 1. å…ˆåˆ†ç±»åç­–ç•¥
```
æ•°æ®åˆ†çº§åˆ†ç±» â†’ åˆ›å»ºå®‰å…¨ç­–ç•¥ â†’ å»ºç«‹æ˜ å°„ â†’ å¯ç”¨ç­–ç•¥
```

### 2. åˆ†çº§ç®¡ç†
```
L4æ•°æ® â†’ æœ€ä¸¥æ ¼ç­–ç•¥ï¼ˆåŠ å¯†+å®¡æ‰¹+å®¡è®¡ï¼‰
L3æ•°æ® â†’ ä¸¥æ ¼ç­–ç•¥ï¼ˆè„±æ•+è®¤è¯+å®¡è®¡ï¼‰
L2æ•°æ® â†’ æ ‡å‡†ç­–ç•¥ï¼ˆè®¤è¯+å®¡è®¡ï¼‰
L1æ•°æ® â†’ åŸºç¡€ç­–ç•¥ï¼ˆå®¡è®¡ï¼‰
```

### 3. å®šæœŸå®¡æŸ¥
```
æ¯æœˆå®¡æŸ¥ç­–ç•¥æ‰§è¡Œæƒ…å†µ
æ¯å­£åº¦æ›´æ–°ç­–ç•¥è§„åˆ™
æ¯å¹´è¿›è¡Œå®‰å…¨è¯„ä¼°
```

## æ€»ç»“

å®‰å…¨ç­–ç•¥çš„æ‰§è¡Œæ˜¯ä¸€ä¸ª**è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–**çš„è¿‡ç¨‹ï¼š

1. **æ•°æ®åˆ†ç±»**æ˜¯åŸºç¡€ - å‘Šè¯‰ç³»ç»Ÿå“ªäº›æ˜¯æ ¸å¿ƒæ•°æ®
2. **å®‰å…¨ç­–ç•¥**æ˜¯è§„åˆ™ - å®šä¹‰å¦‚ä½•ä¿æŠ¤æ•°æ®
3. **ç­–ç•¥å¼•æ“**æ˜¯æ‰§è¡Œè€… - è‡ªåŠ¨åº”ç”¨ç­–ç•¥
4. **å®¡è®¡æ—¥å¿—**æ˜¯ç›‘ç£ - è®°å½•æ‰€æœ‰æ“ä½œ

é€šè¿‡è¿™å¥—æœºåˆ¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿï¼š
- âœ… è‡ªåŠ¨è¯†åˆ«æ ¸å¿ƒæ•°æ®
- âœ… è‡ªåŠ¨åº”ç”¨å®‰å…¨ç­–ç•¥
- âœ… è‡ªåŠ¨è®°å½•å®¡è®¡æ—¥å¿—
- âœ… è‡ªåŠ¨å‘Šè­¦å¼‚å¸¸è¡Œä¸º

---

**ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°æ—¶é—´**: 2024-10-25
