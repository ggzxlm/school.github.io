# ETL作业管理 - 数据预置更新

## 更新内容

已为ETL作业管理模块预置了丰富的演示数据，包含12个不同业务场景的ETL作业。

## 新增功能

### 1. 扩展的演示数据
从原来的5个作业扩展到12个作业，涵盖：
- ✅ 财务数据日度同步
- ✅ 人事数据增量同步  
- ✅ 采购数据月度汇总
- ✅ 学生成绩数据清洗
- ✅ 科研项目数据整合
- ✅ **资产设备数据同步** (新增)
- ✅ **审计线索数据汇总** (新增)
- ✅ **教师师德数据采集** (新增)
- ✅ **三公经费数据整合** (新增)
- ✅ **工单数据实时同步** (新增)
- ✅ **招生数据质量检查** (新增)
- ✅ **图书借阅数据分析** (新增)

### 2. 重新加载演示数据功能
在ETL管理页面添加了"重新加载演示数据"按钮，支持：
- 一键清空现有数据
- 重新加载完整的演示数据
- 包含作业配置和执行历史

### 3. 更丰富的作业配置
每个作业包含：
- 详细的业务描述
- 完整的数据源配置
- 多样的转换规则（过滤、映射、计算、拆分、合并）
- 目标表配置
- Cron调度表达式
- 状态和启用标识

### 4. 自动生成执行历史
为已发布的作业自动生成3-5条历史执行记录，包括：
- 执行时间和状态
- 处理记录数统计
- 成功/失败记录数
- 详细的执行日志

## 文件修改

### js/etl-service.js
- 扩展 `initSampleData()` 方法，新增7个作业
- 新增 `reinitializeSampleData()` 方法
- 新增 `clearAllData()` 方法

### etl-management.html
- 添加"重新加载演示数据"按钮

### js/etl-management.js
- 添加 `reloadSampleData()` 函数
- 添加按钮事件监听器

## 测试文件

### test-etl-data.html
独立的测试页面，用于验证ETL数据功能：
- 显示统计信息
- 列出所有作业
- 支持重新加载和清空数据

## 使用方法

### 方法1：通过ETL管理页面
1. 打开 `etl-management.html`
2. 点击右上角"重新加载演示数据"按钮
3. 确认操作

### 方法2：通过测试页面
1. 打开 `test-etl-data.html`
2. 点击"重新加载演示数据"按钮
3. 查看加载结果

### 方法3：通过浏览器控制台
```javascript
// 重新加载演示数据
window.etlService.reinitializeSampleData();

// 查看统计信息
window.etlService.getStatistics();

// 查看所有作业
window.etlService.getAll();

// 清空所有数据
window.etlService.clearAllData();
```

## 数据特点

### 业务覆盖全面
涵盖高校纪检审计监管平台的主要业务场景：
- 财务监管
- 人事管理
- 采购监督
- 教务管理
- 科研管理
- 资产管理
- 审计监督
- 师德建设
- 三公经费
- 工单处理
- 招生管理
- 图书管理

### 转换规则多样
包含所有支持的转换类型：
- FILTER: 数据过滤
- MAP: 字段映射
- CALCULATE: 计算字段
- SPLIT: 字段拆分
- MERGE: 字段合并

### 调度配置完整
包含各种调度场景：
- 每日定时执行
- 每小时执行
- 每15分钟执行
- 每5分钟执行
- 每月执行
- 每周执行
- 手动执行

### 状态分布合理
- 已发布作业：10个
- 草稿作业：2个
- 已启用作业：10个
- 已禁用作业：2个

## 注意事项

1. 演示数据存储在浏览器 localStorage 中
2. 重新加载会清空所有现有数据
3. 数据仅用于功能展示和测试
4. 生产环境需要配置真实数据源

## 后续优化建议

1. 添加数据导入/导出功能
2. 支持自定义演示数据模板
3. 添加数据备份和恢复功能
4. 支持批量操作
5. 添加数据验证和完整性检查
