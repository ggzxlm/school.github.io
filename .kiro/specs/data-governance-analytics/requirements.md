# 需求文档

## 简介

数据采集与治理、数据分析与预警功能扩展是高校纪检审计监管一体化平台的核心数据能力模块。本模块旨在建立完整的数据采集、治理、分析和预警体系,为监督业务提供坚实的数据基础和智能化分析能力。系统将从多个业务系统采集数据,经过标准化治理后,通过规则引擎和智能分析技术自动识别风险,生成预警信息。

## 术语表

- **系统**: 高校纪检审计监管一体化平台数据采集与分析模块
- **数据源系统**: 财务、科研、资产、采购、人事等业务系统
- **CDC**: Change Data Capture,变更数据捕获技术
- **ETL**: Extract-Transform-Load,数据抽取转换加载
- **主数据**: 人员、组织、供应商、项目、合同等核心业务实体数据
- **数据血缘**: 数据从源到目标的流转路径和转换关系
- **规则引擎**: 基于配置规则自动检查数据并生成预警的系统
- **OCR**: Optical Character Recognition,光学字符识别
- **NLP**: Natural Language Processing,自然语言处理

## 需求

### 需求 1: 数据源接入与管理

**用户故事:** 作为数据管理员,我希望系统能够接入多种数据源并监控连接状态,以便确保数据采集的稳定性

#### 验收标准

1. WHEN 管理员配置数据源,THE 系统 SHALL 支持 API、数据库直连、文件上传三种接入方式
2. WHEN 数据源连接建立后,THE 系统 SHALL 每5分钟检测一次连接健康状态并记录监控日志
3. WHEN 数据源连接异常,THE 系统 SHALL 立即发送告警通知给管理员
4. WHEN 管理员查看数据源列表,THE 系统 SHALL 展示数据源名称、类型、状态、最后同步时间、吞吐量等信息
5. WHERE 管理员具有配置权限,THE 系统 SHALL 允许管理员新增、编辑、删除、测试连接数据源

### 需求 2: 增量数据同步

**用户故事:** 作为数据管理员,我希望系统能够准实时同步业务数据,以便及时发现风险问题

#### 验收标准

1. WHEN 数据源发生数据变更,THE 系统 SHALL 基于 CDC 机制在5分钟内捕获增量数据
2. WHEN 增量同步任务执行,THE 系统 SHALL 记录同步开始时间、结束时间、同步记录数、失败记录数
3. WHEN 同步任务失败,THE 系统 SHALL 自动重试3次,每次间隔5分钟
4. WHEN 重试3次后仍失败,THE 系统 SHALL 发送告警通知并记录详细错误日志
5. WHERE 数据源不支持 CDC,THE 系统 SHALL 支持配置定时全量或增量抽取策略

### 需求 3: 数据处理与转换

**用户故事:** 作为数据开发人员,我希望系统提供可视化的数据处理工具,以便快速构建数据处理流程

#### 验收标准

1. WHEN 用户创建数据处理作业,THE 系统 SHALL 提供可视化拖拽式 ETL 设计器
2. WHEN 用户配置数据转换规则,THE 系统 SHALL 支持字段映射、数据清洗、格式转换、计算字段等操作
3. WHEN 用户保存处理作业,THE 系统 SHALL 记录作业版本并支持版本回退
4. WHEN 处理作业执行,THE 系统 SHALL 记录处理日志并支持查看中间结果
5. WHERE 用户需要复杂处理逻辑,THE 系统 SHALL 支持编写 SQL 或 Python 脚本

### 需求 4: 主数据管理

**用户故事:** 作为数据管理员,我希望系统能够统一管理主数据,以便消除数据孤岛和重复数据

#### 验收标准

1. WHEN 系统采集到人员、组织、供应商等主数据,THE 系统 SHALL 基于姓名、身份证号、统一社会信用代码等关键字段进行去重识别
2. WHEN 系统检测到重复主数据,THE 系统 SHALL 提示用户确认合并并保留合并历史记录
3. WHEN 主数据合并后,THE 系统 SHALL 为每个主数据实体生成全局唯一标识
4. WHEN 用户查询主数据,THE 系统 SHALL 展示主数据的所有来源系统和关联关系
5. WHERE 主数据发生变更,THE 系统 SHALL 记录变更历史并支持追溯

### 需求 5: 数据仓库分层建模

**用户故事:** 作为数据架构师,我希望系统按照分层架构构建数据仓库,以便支持多层次的数据分析

#### 验收标准

1. WHEN 系统构建数据仓库,THE 系统 SHALL 按照明细层(ODS)、中间层(DWD/DWS)、汇总层(ADS)进行分层建模
2. WHEN 数据进入明细层,THE 系统 SHALL 保持与源系统一致的数据结构和粒度
3. WHEN 数据进入中间层,THE 系统 SHALL 按照主题域进行数据整合和轻度汇总
4. WHEN 数据进入汇总层,THE 系统 SHALL 按照分析需求生成指标数据集市
5. WHERE 数据量超过阈值,THE 系统 SHALL 自动执行分区和冷热分层存储策略

### 需求 6: 数据质量管理

**用户故事:** 作为数据质量管理员,我希望系统能够自动检查数据质量,以便及时发现和修复数据问题

#### 验收标准

1. WHEN 管理员配置质量规则,THE 系统 SHALL 支持完整性、准确性、一致性、及时性四类规则配置
2. WHEN 数据进入系统,THE 系统 SHALL 自动执行质量规则检查并生成质量评分
3. WHEN 检测到质量异常,THE 系统 SHALL 自动创建质量异常工单并分配给责任人
4. WHEN 责任人修复质量问题,THE 系统 SHALL 记录修复过程并执行复测验证
5. WHERE 用户需要查看质量报告,THE 系统 SHALL 提供质量评分看板和趋势分析图表

### 需求 7: 元数据与血缘管理

**用户故事:** 作为数据管理员,我希望系统能够管理元数据和血缘关系,以便理解数据的来龙去脉

#### 验收标准

1. WHEN 系统采集数据,THE 系统 SHALL 自动采集表、字段、作业等技术元数据
2. WHEN 用户查询元数据,THE 系统 SHALL 提供元数据目录检索服务并展示字段定义、数据类型、业务含义
3. WHEN 用户查看数据血缘,THE 系统 SHALL 可视化展示数据从源到目标的完整流转路径
4. WHEN 用户分析变更影响,THE 系统 SHALL 基于血缘关系分析字段变更的下游影响范围
5. WHERE 用户需要追溯数据来源,THE 系统 SHALL 支持从目标表反向追溯到源系统和源表

### 需求 8: 数据安全与脱敏

**用户故事:** 作为安全管理员,我希望系统能够保护敏感数据,以便符合数据安全和隐私保护要求

#### 验收标准

1. WHEN 系统识别到敏感字段,THE 系统 SHALL 根据脱敏策略自动进行静态脱敏处理
2. WHEN 用户访问敏感数据,THE 系统 SHALL 基于用户权限进行动态脱敏展示
3. WHEN 用户查询敏感数据,THE 系统 SHALL 添加用户水印并记录访问日志
4. WHERE 用户需要导出数据,THE 系统 SHALL 检查导出权限并对敏感字段进行脱敏处理
5. WHEN 系统执行数据共享,THE 系统 SHALL 要求审批流程并记录共享范围和用途

### 需求 9: 监督模型库

**用户故事:** 作为业务管理员,我希望系统提供预置的监督模型,以便快速启用监督功能

#### 验收标准

1. WHEN 系统初始化,THE 系统 SHALL 提供预算执行、三公经费、科研经费、资产管理、基建采购、招生录取等20个以上预置模型
2. WHEN 用户查看模型库,THE 系统 SHALL 展示模型名称、适用场景、检查规则、预警等级等信息
3. WHEN 用户启用预置模型,THE 系统 SHALL 自动配置相关规则并开始执行检查
4. WHERE 用户需要自定义模型,THE 系统 SHALL 提供拖拽式建模工具或脚本编辑器
5. WHEN 用户创建自定义模型,THE 系统 SHALL 支持样本管理、历史回测和效果对比功能

### 需求 10: 规则引擎配置

**用户故事:** 作为规则管理员,我希望系统提供灵活的规则配置能力,以便适应不同的监督场景

#### 验收标准

1. WHEN 管理员配置预警规则,THE 系统 SHALL 支持阈值规则、趋势规则、关联规则、时序规则、图谱规则五种类型
2. WHEN 管理员设置规则参数,THE 系统 SHALL 支持配置检查字段、比较运算符、阈值、时间窗口等参数
3. WHEN 管理员配置规则优先级,THE 系统 SHALL 支持设置规则执行顺序和冲突处理策略
4. WHEN 管理员测试规则,THE 系统 SHALL 提供规则测试功能并展示匹配结果
5. WHERE 管理员需要批量管理规则,THE 系统 SHALL 支持规则的导入、导出、复制、批量启用/禁用

### 需求 11: 实时预警引擎

**用户故事:** 作为监督人员,我希望系统能够实时检测风险并生成预警,以便及时发现问题

#### 验收标准

1. WHEN 新增业务数据进入系统,THE 系统 SHALL 在5分钟内自动触发规则检查
2. WHEN 规则检查命中,THE 系统 SHALL 立即生成预警记录并记录触发规则、涉及对象、关键数据
3. WHEN 预警生成后,THE 系统 SHALL 根据预警等级自动分级为高、中、低三个等级
4. WHEN 预警分级完成,THE 系统 SHALL 根据通知策略自动发送通知给责任人
5. WHERE 系统支持流式处理,THE 系统 SHALL 对高频数据源采用流式处理实现秒级预警

### 需求 12: 预警去重与聚类

**用户故事:** 作为监督人员,我希望系统能够对相似预警进行聚类,以便减少重复处置工作

#### 验收标准

1. WHEN 系统生成多条预警,THE 系统 SHALL 基于涉及对象、时间范围、规则类型计算预警相似度
2. WHEN 相似度超过80%,THE 系统 SHALL 自动将预警聚类并标记为同一批次
3. WHEN 用户查看聚类预警,THE 系统 SHALL 展示聚类原因和包含的预警列表
4. WHERE 用户确认聚类正确,THE 系统 SHALL 支持批量处置聚类预警
5. WHEN 用户标注误报预警,THE 系统 SHALL 记录误报标签并作为训练样本优化聚类算法

### 需求 13: 智能关联分析

**用户故事:** 作为分析人员,我希望系统能够进行智能关联分析,以便发现隐藏的风险关系

#### 验收标准

1. WHEN 用户选择分析对象,THE 系统 SHALL 构建人员-企业-合同-投标等多实体关系网络
2. WHEN 系统构建关系网络,THE 系统 SHALL 自动识别亲属关系、股权关系、任职关系等隐藏关联
3. WHEN 用户查看关系图谱,THE 系统 SHALL 可视化展示实体节点和关系边,并支持缩放、拖拽、筛选
4. WHEN 系统检测到风险关联,THE 系统 SHALL 用红色标识风险路径并生成关联分析报告
5. WHERE 用户需要深度分析,THE 系统 SHALL 支持设置关联层级和实体类型过滤

### 需求 14: 文本智能分析

**用户故事:** 作为监督人员,我希望系统能够分析文本内容,以便自动识别关键信息和风险点

#### 验收标准

1. WHEN 用户上传会议纪要,THE 系统 SHALL 使用 NLP 技术自动抽取会议主题、参会人员、决策事项等要点
2. WHEN 系统分析招标文件,THE 系统 SHALL 自动识别技术参数、资质要求等条款并标注排他性或倾向性内容
3. WHEN 系统分析合同文本,THE 系统 SHALL 自动抽取合同金额、履约期限、违约条款等关键信息
4. WHEN 系统检测到敏感词汇,THE 系统 SHALL 高亮显示并生成敏感词预警
5. WHERE 用户需要批量分析,THE 系统 SHALL 支持批量上传文档并生成分析报告

### 需求 15: 票据 OCR 与查验

**用户故事:** 作为核查人员,我希望系统能够自动识别票据信息,以便快速核验证据材料

#### 验收标准

1. WHEN 用户上传发票影像,THE 系统 SHALL 使用 OCR 技术自动识别发票代码、号码、金额、日期、购买方、销售方等字段
2. WHEN OCR 识别完成,THE 系统 SHALL 自动调用税务接口进行发票真伪查验
3. WHEN 发票查验完成,THE 系统 SHALL 展示查验结果并标注真伪状态
4. WHEN 系统检测到连号发票或重复发票,THE 系统 SHALL 自动生成异常预警
5. WHERE 用户需要批量处理,THE 系统 SHALL 支持批量上传票据并生成识别结果清单

### 需求 16: 审批链还原

**用户故事:** 作为审计人员,我希望系统能够还原审批流程,以便核查审批合规性

#### 验收标准

1. WHEN 用户查询业务事项,THE 系统 SHALL 自动还原完整的审批流程节点
2. WHEN 系统还原审批链,THE 系统 SHALL 展示每个节点的审批人、审批时间、审批意见、审批结果
3. WHEN 系统检测到审批异常,THE 系统 SHALL 标注跳过节点、超时审批、越权审批等异常情况
4. WHEN 用户导出审批链,THE 系统 SHALL 生成时间线图表和审批记录清单
5. WHERE 审批流程涉及多系统,THE 系统 SHALL 整合多系统审批数据形成完整链路

### 需求 17: 指标库与自助报表

**用户故事:** 作为管理人员,我希望系统提供自助报表工具,以便灵活查询和分析数据

#### 验收标准

1. WHEN 系统初始化,THE 系统 SHALL 提供预警数量、线索数量、整改完成率等50个以上预置指标
2. WHEN 用户创建报表,THE 系统 SHALL 提供拖拽式报表设计器并支持选择维度、指标、筛选条件
3. WHEN 用户选择图表类型,THE 系统 SHALL 支持柱状图、折线图、饼图、表格等多种展示方式
4. WHEN 用户保存报表,THE 系统 SHALL 支持保存为个人报表或共享报表模板
5. WHERE 用户需要定时报表,THE 系统 SHALL 支持配置报表订阅和自动分发

### 需求 18: 报表订阅与分发

**用户故事:** 作为管理人员,我希望系统能够定时生成和分发报表,以便及时掌握监督情况

#### 验收标准

1. WHEN 用户订阅报表,THE 系统 SHALL 支持配置生成周期(日报、周报、月报)和分发时间
2. WHEN 报表生成时间到达,THE 系统 SHALL 自动执行报表生成任务
3. WHEN 报表生成完成,THE 系统 SHALL 通过邮件、短信、即时通讯等渠道分发给订阅用户
4. WHEN 用户查看报表,THE 系统 SHALL 自动添加用户水印并记录查看日志
5. WHERE 用户需要导出报表,THE 系统 SHALL 支持导出为 Excel、PDF、图片等格式

### 需求 19: 外部数据接入

**用户故事:** 作为数据管理员,我希望系统能够接入外部数据源,以便丰富风险识别维度

#### 验收标准

1. WHEN 管理员配置外部数据源,THE 系统 SHALL 支持接入工商信息、法人黑名单、税务发票、市场信息价等外部数据
2. WHEN 系统接入工商数据,THE 系统 SHALL 自动比对供应商信息并识别股权关系和法人变更
3. WHEN 系统接入发票查验接口,THE 系统 SHALL 支持批量发票真伪查验
4. WHEN 系统接入市场信息价,THE 系统 SHALL 自动比对采购价格并预警异常高价或低价
5. WHERE 外部接口调用失败,THE 系统 SHALL 记录失败日志并支持手动重试

### 需求 20: 模型优化反馈

**用户故事:** 作为业务管理员,我希望系统能够根据反馈优化模型,以便提高预警准确率

#### 验收标准

1. WHEN 用户标注误报预警,THE 系统 SHALL 记录误报标签、误报原因并沉淀为训练样本
2. WHEN 用户标注漏报问题,THE 系统 SHALL 记录漏报场景并分析规则缺失原因
3. WHEN 系统积累足够样本,THE 系统 SHALL 自动分析规则阈值和特征权重并生成优化建议
4. WHEN 管理员查看优化建议,THE 系统 SHALL 展示建议的规则调整方案和预期效果
5. WHERE 管理员采纳建议,THE 系统 SHALL 支持一键应用优化方案并执行历史数据回测对比

### 需求 21: 数据分类分级

**用户故事:** 作为安全管理员,我希望系统能够对数据进行分类分级,以便实施差异化保护策略

#### 验收标准

1. WHEN 管理员制定分类分级标准,THE 系统 SHALL 支持定义公开、内部、敏感、机密四个数据级别
2. WHEN 数据进入系统,THE 系统 SHALL 基于字段名称、数据内容自动识别并标注数据级别
3. WHEN 自动标注完成,THE 系统 SHALL 支持人工审核和调整数据级别
4. WHEN 系统执行定期巡检,THE 系统 SHALL 每月自动巡检数据分级准确性并生成巡检报告
5. WHERE 数据级别发生变更,THE 系统 SHALL 记录变更历史并通知相关责任人

### 需求 22: 数据共享审批

**用户故事:** 作为安全管理员,我希望系统能够管理数据共享流程,以便控制数据流出风险

#### 验收标准

1. WHEN 用户申请数据共享,THE 系统 SHALL 要求填写共享目的、共享范围、共享期限、使用方式
2. WHEN 共享申请提交,THE 系统 SHALL 根据数据级别自动路由到相应审批人
3. WHEN 审批通过后,THE 系统 SHALL 根据共享范围自动生成脱敏数据并添加水印
4. WHEN 数据共享执行,THE 系统 SHALL 记录共享日志包括共享时间、共享对象、共享内容
5. WHERE 共享期限到期,THE 系统 SHALL 自动回收共享权限并通知申请人

### 需求 23: 等保合规支持

**用户故事:** 作为安全管理员,我希望系统能够支持等保测评,以便满足合规要求

#### 验收标准

1. WHEN 管理员执行等保自查,THE 系统 SHALL 提供等保三级自查清单和自动化检查工具
2. WHEN 系统生成测评报表,THE 系统 SHALL 自动汇总访问日志、操作日志、安全配置等测评所需数据
3. WHEN 测评发现问题,THE 系统 SHALL 创建整改工单并跟踪整改进度
4. WHEN 整改完成后,THE 系统 SHALL 支持复核验证并生成整改报告
5. WHERE 需要定期测评,THE 系统 SHALL 支持配置测评周期并自动提醒测评任务

### 需求 24: 运维监控告警

**用户故事:** 作为运维人员,我希望系统能够监控运行状态,以便及时发现和处理异常

#### 验收标准

1. WHEN 系统运行,THE 系统 SHALL 实时监控 CPU、内存、磁盘、网络等资源使用率
2. WHEN 资源使用率超过80%,THE 系统 SHALL 发送预警通知给运维人员
3. WHEN 数据同步任务失败,THE 系统 SHALL 立即发送告警并记录失败详情
4. WHEN 规则引擎执行异常,THE 系统 SHALL 记录异常堆栈并发送告警
5. WHERE 系统需要容量规划,THE 系统 SHALL 提供资源使用趋势分析和容量预测报告
