# ETL作业管理 - 演示数据说明

## 概述

ETL作业管理模块已预置了丰富的演示数据，包含12个不同场景的ETL作业，涵盖财务、人事、采购、教务、科研、资产、审计等多个业务领域。

## 预置作业列表

### 1. 财务数据日度同步
- **描述**: 每日凌晨同步财务系统数据到数据仓库ODS层
- **调度**: 每天 00:00 执行
- **状态**: 已发布、已启用
- **转换规则**: 
  - 过滤金额大于0的记录
  - 字段名称映射
  - 金额单位转换（分→元）

### 2. 人事数据增量同步
- **描述**: 每15分钟同步人事系统变更数据
- **调度**: 每15分钟执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 计算年龄
  - 合并姓名字段

### 3. 采购数据月度汇总
- **描述**: 每月汇总采购数据到DWS层
- **调度**: 每月1日 02:00 执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 计算平均订单金额

### 4. 学生成绩数据清洗
- **描述**: 清洗和标准化学生成绩数据
- **调度**: 每天 03:00 执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 过滤无效成绩（0-100分）
  - 计算等级（A/B/C/D/F）
  - 标准化字段名

### 5. 科研项目数据整合
- **描述**: 整合多个系统的科研项目数据
- **调度**: 手动执行
- **状态**: 草稿、已禁用
- **转换规则**:
  - 拆分项目成员
  - 计算项目持续天数

### 6. 资产设备数据同步
- **描述**: 每日同步资产管理系统的设备信息
- **调度**: 每天 01:00 执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 计算使用年限
  - 计算折旧率
  - 标准化设备编号

### 7. 审计线索数据汇总
- **描述**: 每小时汇总审计线索统计数据
- **调度**: 每小时执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 风险等级转数值

### 8. 教师师德数据采集
- **描述**: 采集教师师德相关数据
- **调度**: 每天 04:00 执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 过滤已删除记录
  - 计算综合师德分数
  - 统一教师编号

### 9. 三公经费数据整合
- **描述**: 整合公务接待、公务用车、因公出国三类经费
- **调度**: 每天 05:00 执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 过滤无效金额
  - 标记超标记录
  - 生成唯一键

### 10. 工单数据实时同步
- **描述**: 实时同步工单系统数据
- **调度**: 每5分钟执行
- **状态**: 已发布、已启用
- **转换规则**:
  - 计算处理时长
  - 判断是否超时
  - 标准化状态字段

### 11. 招生数据质量检查
- **描述**: 检查招生系统数据质量
- **调度**: 每天 06:00 执行
- **状态**: 草稿、已禁用
- **转换规则**:
  - 过滤身份证号异常
  - 计算数据完整性分数
  - 从身份证提取年龄

### 12. 图书借阅数据分析
- **描述**: 分析图书馆借阅数据
- **调度**: 每周一 07:00 执行
- **状态**: 草稿、已禁用
- **转换规则**:
  - 读者活跃度分级

## 执行历史

系统为所有已发布的作业自动生成了3-5条历史执行记录，包括：
- 执行时间
- 执行状态（成功/失败）
- 处理记录数
- 成功/失败记录数
- 详细执行日志

## 如何使用

### 查看演示数据
1. 打开 `etl-management.html` 页面
2. 系统会自动加载预置的演示数据
3. 可以通过搜索、筛选功能查看不同的作业

### 重新加载演示数据
1. 点击页面右上角的"重新加载演示数据"按钮
2. 确认操作后，系统会清空现有数据并重新加载演示数据
3. 适用于数据被修改或删除后需要恢复的场景

### 查看作业详情
1. 点击作业列表中的"查看"按钮
2. 可以查看作业的完整配置信息
3. 可以查看执行历史和统计信息

### 执行作业
1. 点击作业列表中的"执行"按钮
2. 系统会模拟执行ETL流程
3. 执行完成后会显示执行结果

### 编辑作业
1. 点击作业列表中的"编辑"按钮
2. 修改作业配置
3. 保存后会生成新版本

## 数据存储

所有数据存储在浏览器的 localStorage 中：
- `etl_jobs`: ETL作业配置
- `etl_executions`: 执行历史记录
- `etl_versions`: 版本历史记录

## 技术特性

### 转换规则类型
- **FILTER**: 数据过滤
- **MAP**: 字段映射
- **CALCULATE**: 计算字段
- **SPLIT**: 字段拆分
- **MERGE**: 字段合并

### 写入模式
- **INSERT**: 插入新记录
- **UPDATE**: 更新现有记录
- **UPSERT**: 插入或更新

### 作业状态
- **DRAFT**: 草稿
- **PUBLISHED**: 已发布
- **ARCHIVED**: 已归档

### 执行状态
- **RUNNING**: 运行中
- **SUCCESS**: 成功
- **FAILED**: 失败

## 注意事项

1. 演示数据仅用于功能展示和测试
2. 实际生产环境需要配置真实的数据源连接
3. 转换规则的表达式需要根据实际数据结构调整
4. 调度表达式使用标准的 Cron 格式

## 后续扩展

可以基于这些演示数据：
1. 测试ETL作业的创建、编辑、删除功能
2. 测试作业执行和监控功能
3. 测试版本管理和回退功能
4. 开发可视化设计器功能
5. 集成真实的数据源和目标系统
