# 数据查看功能使用指南

## 功能概述

数据查看模块用于查看和对比数据治理过程中的原始数据和治理后的数据，主要供数据管理员使用。

## 如何查看数据

### 1. 进入数据查看页面
- 点击侧边栏"数据治理" → "数据查看"
- 或直接访问 `data-viewer.html`

### 2. 选择数据类型
页面顶部有两个标签：
- **原始数据**：从各系统采集的原始数据
- **治理后数据**：经过清洗、去重、标准化后的数据

### 3. 选择数据表
在下拉框中选择要查看的数据表，系统提供12类数据：

#### 基础数据
1. **人员信息** - 教职工基本信息
2. **供应商信息** - 供应商企业信息
3. **采购项目** - 采购项目详情
4. **财务数据** - 财务凭证和交易记录

#### 业务数据
5. **科研项目** - 科研项目信息和经费使用
6. **资产信息** - 固定资产和设备信息
7. **合同信息** - 各类合同数据
8. **招生数据** - 学生招生录取信息
9. **学生资助** - 奖学金、助学金发放记录

#### 关联关系数据 ⭐
10. **人员家庭关系** - 人员之间的亲属关系
11. **企业股权关系** - 人员在企业中的任职和持股
12. **关联关系预警** - 系统识别的利益冲突预警

## 如何搜索数据

### 在数据查看页面内搜索

1. **选择数据表**：首先在下拉框中选择要搜索的数据表
2. **输入关键词**：在搜索框中输入关键词（如"张三"）
3. **实时过滤**：系统会实时过滤显示包含关键词的记录

**示例**：搜索"张三"相关的关联关系
```
1. 选择数据类型：原始数据
2. 选择数据表：关联关系预警（原始）
3. 在搜索框输入：张三
4. 查看结果：显示所有包含"张三"的预警记录
```

### 全局搜索 vs 数据查看搜索

| 功能 | 全局搜索 | 数据查看搜索 |
|------|---------|------------|
| 位置 | 顶部导航栏 | 数据查看页面内 |
| 搜索范围 | 业务实体（项目、预警、工单等） | 选定数据表的所有字段 |
| 使用场景 | 快速查找业务信息 | 数据管理和分析 |
| 目标用户 | 所有用户 | 数据管理员 |

**重要提示**：
- ❌ 全局搜索**不会**搜索数据治理模块的原始数据表
- ✅ 要搜索原始数据，请使用数据查看页面的搜索功能

## 查看关联关系示例

### 场景：查找采购人员与供应商的关联关系

1. **查看关联预警**
   ```
   数据类型：原始数据
   数据表：关联关系预警（原始）
   ```
   可以看到：
   - 预警类型：采购人员-供应商关联
   - 人员A：张三（采购经理）
   - 人员B：李四（供应商法人）
   - 关系路径：张三 → 配偶 → 李四 → 股东 → 某某科技公司
   - 风险等级：高/中/低

2. **查看家庭关系**
   ```
   数据类型：原始数据
   数据表：人员家庭关系（原始）
   搜索：张三
   ```
   可以看到张三的所有家庭成员关系

3. **查看股权关系**
   ```
   数据类型：原始数据
   数据表：企业股权关系（原始）
   搜索：李四
   ```
   可以看到李四在哪些企业任职或持股

## 数据对比功能

点击"对比数据"按钮，可以对比原始数据和治理后数据的差异：

- **数据清洗率**：显示清理了多少条问题数据
- **字段变更**：显示新增或删除的字段
- **质量提升**：显示数据质量分数的提升

## 数据导出

选择数据表后，点击"导出"按钮可以将数据导出为CSV格式，用于进一步分析。

## 常见问题

### Q: 为什么全局搜索找不到"张三"？
A: 全局搜索只搜索业务实体，不包括数据治理模块的原始数据。请在数据查看页面内搜索。

### Q: 如何查看某个人的所有关联关系？
A: 
1. 在"人员家庭关系"表中搜索该人员，查看家庭关系
2. 在"企业股权关系"表中搜索该人员，查看任职和持股
3. 在"关联关系预警"表中搜索该人员，查看系统识别的风险

### Q: 原始数据和治理后数据有什么区别？
A: 
- **原始数据**：直接从源系统采集，可能包含重复、错误、不完整的数据
- **治理后数据**：经过清洗、去重、标准化，数据质量更高

### Q: 数据多久更新一次？
A: 根据采集任务的配置，可以是实时、每小时、每天等不同频率。

## 技术说明

### 数据来源
- 人员信息：人事系统
- 供应商信息：采购系统
- 家庭关系：公安系统
- 股权关系：工商系统
- 关联预警：关联分析系统（基于图算法自动识别）

### 关联识别算法
系统使用图数据库技术，通过以下方式识别关联关系：
1. 构建人员-企业-项目关系图谱
2. 计算关系路径和深度
3. 评估风险等级和置信度
4. 生成预警记录

### 数据安全
- 所有敏感数据（身份证号、手机号等）已脱敏处理
- 访问需要相应权限
- 操作日志完整记录
