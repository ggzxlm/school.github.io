# 数据安全策略 - 快速参考

## 🎯 核心概念

### 什么是核心数据？

**核心数据 = 数据级别为 L3 或 L4 的数据**

- **L4-机密**：财务数据、薪资信息、审计报告
- **L3-敏感**：个人信息、学生档案、科研数据

### 如何标记核心数据？

在 `data-classification.html` 页面：
1. 找到或创建数据分类
2. 设置数据级别为 **L3** 或 **L4**
3. 保存

示例：
```
表名: financial_transaction
分类: 财务数据
级别: L4-机密  ← 标记为核心数据
```

## 🔧 策略配置

### 适用范围的写法

在创建/编辑策略时，"适用范围"字段可以这样填写：

#### 方式1: 按数据级别
```
L4级别数据
所有L4级别数据
数据级别=L4
```

#### 方式2: 按数据分类
```
财务数据
数据分类=财务数据
所有财务相关数据
```

#### 方式3: 按表名
```
financial_transaction, salary_info
所有financial_开头的表
```

#### 方式4: 按字段
```
包含amount字段的表
包含敏感字段的数据
```

#### 方式5: 组合条件
```
L4级别的财务数据
L3级别且包含id_card字段的数据
```

## 📋 策略类型与适用场景

### 1. 访问控制 → 用于限制谁能访问

**适用范围示例**：
```
所有L3和L4级别数据
```

**执行规则选择**：
- 身份认证要求
- 访问审批流程
- IP白名单控制
- 基于角色的访问

### 2. 数据脱敏 → 用于隐藏敏感信息

**适用范围示例**：
```
包含id_card、phone、bank_card字段的数据
```

**执行规则选择**：
- 身份证号脱敏
- 手机号脱敏
- 银行卡号脱敏
- 邮箱脱敏

### 3. 数据加密 → 用于保护数据安全

**适用范围示例**：
```
L4级别数据
财务数据、薪资数据
```

**执行规则选择**：
- 存储加密
- 传输加密
- 字段级加密
- 备份加密

### 4. 审计监控 → 用于记录操作日志

**适用范围示例**：
```
所有数据
L3和L4级别数据
```

**执行规则选择**：
- 访问日志记录
- 变更日志记录
- 导出操作审计
- 异常行为告警

### 5. 数据备份 → 用于数据恢复

**适用范围示例**：
```
所有核心业务数据
L4级别数据
```

**执行规则选择**：
- 每日备份
- 增量备份
- 异地备份
- 版本备份

### 6. 权限管理 → 用于管理用户权限

**适用范围示例**：
```
所有数据表
敏感数据表
```

**执行规则选择**：
- 角色权限管理
- 临时权限授予
- 权限审批流程
- 职责分离

## 🚀 快速配置指南

### 场景1: 保护财务数据

**第一步 - 数据分类**：
```
打开: data-classification.html
操作: 创建分类
  - 名称: 财务数据
  - 级别: L4-机密  ← 标记为核心数据
  - 表: financial_transaction, salary_info
```

**第二步 - 创建策略**：
```
打开: data-security-management.html
操作: 新增策略
  - 名称: 财务数据加密策略
  - 类型: 数据加密
  - 级别: 高
  - 适用范围: L4级别数据  ← 自动应用到财务数据
  - 规则: 选择"存储加密"模板
```

### 场景2: 保护个人信息

**第一步 - 数据分类**：
```
打开: data-classification.html
操作: 创建分类
  - 名称: 个人信息
  - 级别: L3-敏感  ← 标记为敏感数据
  - 字段: name, id_card, phone
```

**第二步 - 创建脱敏策略**：
```
打开: data-security-management.html
操作: 新增策略
  - 名称: 个人信息脱敏策略
  - 类型: 数据脱敏
  - 级别: 高
  - 适用范围: L3级别数据  ← 自动应用到个人信息
  - 规则: 选择"身份证号脱敏"模板
```

**第三步 - 创建访问控制**：
```
操作: 新增策略
  - 名称: 个人信息访问控制
  - 类型: 访问控制
  - 级别: 高
  - 适用范围: L3级别数据
  - 规则: 选择"身份认证要求"模板
```

## 💡 最佳实践

### 1. 先分类后策略
```
步骤1: 在数据分类系统中标记核心数据
步骤2: 在安全管理系统中创建对应策略
步骤3: 通过"适用范围"建立关联
```

### 2. 分级保护
```
L4数据 → 加密+审批+审计+备份 (4层保护)
L3数据 → 脱敏+认证+审计 (3层保护)
L2数据 → 认证+审计 (2层保护)
L1数据 → 审计 (1层保护)
```

### 3. 定期检查
```
每周: 查看审计日志，发现异常
每月: 审查策略执行情况
每季: 更新策略规则
每年: 全面安全评估
```

## 🔍 验证策略是否生效

### 方法1: 查看审计日志
```
1. 切换到"审计日志"标签页
2. 查看是否有策略执行记录
3. 确认策略是否被触发
```

### 方法2: 查看策略详情
```
1. 点击策略的"查看详情"
2. 查看"应用统计"
3. 应用次数 > 0 说明策略已生效
```

### 方法3: 测试数据访问
```
1. 访问被保护的数据
2. 观察是否触发认证
3. 查看返回数据是否脱敏
4. 检查审计日志是否记录
```

## 📊 策略优先级

当多个策略同时适用时：

```
优先级: 高级别 > 低级别
       特定策略 > 通用策略
       
示例:
策略A: 适用范围=financial_transaction (特定)
策略B: 适用范围=所有L4数据 (通用)

访问financial_transaction时:
优先执行策略A，然后执行策略B
```

## ⚠️ 注意事项

1. **适用范围要明确**
   - 避免过于宽泛（如：所有数据）
   - 避免过于狭窄（如：单个字段）
   - 建议按数据级别或分类指定

2. **策略不要冲突**
   - 同类型策略避免重复
   - 规则要互相兼容
   - 定期检查策略一致性

3. **测试后再启用**
   - 新策略先在测试环境验证
   - 确认不影响业务
   - 逐步推广到生产

4. **保持文档更新**
   - 记录策略创建原因
   - 说明适用范围的依据
   - 更新变更历史

---

**快速记忆**:
- 🏷️ 数据分类 = 标记核心数据
- 🛡️ 安全策略 = 保护核心数据
- 🔗 适用范围 = 连接两者
- ⚙️ 策略引擎 = 自动执行

**版本**: 1.0.0  
**更新时间**: 2024-10-25
