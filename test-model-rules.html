<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模型规则测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        h1 { color: #333; }
        .model-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .rule-item {
            background: white;
            border: 1px solid #ddd;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 6px;
        }
        .rule-name {
            font-weight: 600;
            color: #1e40af;
        }
        .rule-type {
            display: inline-block;
            padding: 2px 8px;
            background: #e0e7ff;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>模型规则数据测试</h1>
    <p>
        <a href="clear-cache.html" style="color: #ef4444; text-decoration: underline;">
            如果数据不正常，点击这里清除缓存
        </a>
    </p>
    <div id="results"></div>

    <script src="js/rule-engine-service.js"></script>
    <script src="js/supervision-model-service.js"></script>
    <script>
        const results = document.getElementById('results');
        
        // 测试规则引擎服务
        if (window.ruleEngineService) {
            const allRules = window.ruleEngineService.getAllRules();
            results.innerHTML += `<p>✅ 规则引擎服务：共有 ${allRules.length} 条规则</p>`;
        }
        
        // 测试监督模型服务
        if (window.supervisionModelService) {
            const allModels = window.supervisionModelService.getAllModels();
            results.innerHTML += `<p>✅ 监督模型服务：共有 ${allModels.length} 个模型</p>`;
            
            // 显示每个模型的规则数量
            allModels.forEach(model => {
                const rulesCount = model.rules ? model.rules.length : 0;
                results.innerHTML += `
                    <div class="model-info">
                        <strong>${model.name}</strong> (${model.category})
                        <br>规则数量: ${rulesCount}
                        <br>状态: ${model.status}
                    </div>
                `;
                
                // 显示规则列表
                if (model.rules && model.rules.length > 0) {
                    model.rules.forEach(rule => {
                        results.innerHTML += `
                            <div class="rule-item">
                                <span class="rule-name">${rule.ruleName}</span>
                                <span class="rule-type">${rule.ruleType}</span>
                                <br>
                                <small>${rule.description}</small>
                            </div>
                        `;
                    });
                }
            });
        }
    </script>
</body>
</html>
