# 数据分级分类功能使用指南

## 功能概述

数据分级分类模块用于对数据资产进行系统化的分类和分级管理，确保数据安全合规。支持自动分类、手动创建分类和编辑映射关系。

## 核心功能

### 1. 自动分类 🤖

**功能说明**：
系统根据预设规则自动扫描数据库表，识别字段特征，自动分配数据分类和级别。

**分类规则**：
- **个人信息 (L3-敏感)**：包含 name, id_card, phone, email, address, birthday 等字段
- **财务数据 (L4-机密)**：包含 salary, amount, account, payment, invoice, budget 等字段
- **业务数据 (L2-内部)**：包含 contract, project, order, customer, supplier 等字段
- **科研数据 (L3-敏感)**：包含 research, funding, publication, patent 等字段
- **系统数据 (L1-公开)**：其他不包含敏感信息的数据

**使用步骤**：
1. 点击页面右上角"自动分类"按钮
2. 查看分类规则说明
3. 点击"开始分类"确认执行
4. 等待分类完成（约2秒）
5. 查看分类结果统计：
   - 扫描表数
   - 已分类表数
   - 新增分类数
   - 更新分类数

**注意事项**：
- ⚠️ 自动分类基于字段名称匹配，可能不完全准确
- ⚠️ 建议在自动分类后进行人工复核
- ⚠️ 自动分类会更新现有映射关系

### 2. 新建分类 ➕

**功能说明**：
手动创建新的数据分类，定义分类规则和安全级别。

**表单字段**：

**必填项**：
- **分类名称**：清晰描述数据类别（如：个人信息）
- **分类编码**：大写字母+下划线，保持唯一性（如：PERSONAL_INFO）
- **数据级别**：选择 L1-L4 级别
  - L1 - 公开：可以公开访问
  - L2 - 内部：仅限内部人员
  - L3 - 敏感：需严格控制
  - L4 - 机密：最高级别保护

**选填项**：
- **分类描述**：详细说明该分类的数据范围
- **关键字段**：用于自动识别的字段名（逗号分隔）
- **控制措施**：访问控制和安全措施说明
- **启用状态**：是否启用该分类

**使用步骤**：
1. 点击"新增分类"按钮
2. 填写分类信息
3. 设置数据级别
4. 输入关键字段（用于自动分类）
5. 点击"创建"保存

**示例**：
```
分类名称：学生档案
分类编码：STUDENT_ARCHIVE
数据级别：L3 - 敏感
描述：包含学生的学籍、成绩、奖惩等档案信息
关键字段：student_id, student_name, grade, score
控制措施：需要教务处授权，数据脱敏展示
```

### 3. 编辑分类 ✏️

**功能说明**：
修改现有数据分类的配置信息。

**可编辑内容**：
- 分类名称
- 分类编码（⚠️ 修改会影响现有映射）
- 数据级别（会自动更新相关映射）
- 分类描述
- 关键字段
- 控制措施

**使用步骤**：
1. 在"数据分类"标签页找到要编辑的分类
2. 点击操作列的"编辑"按钮
3. 修改相关信息
4. 点击"保存"

**注意事项**：
- ⚠️ 修改分类编码可能影响现有映射关系
- ⚠️ 修改数据级别会自动更新所有使用该分类的表

### 4. 编辑映射 🔗

**功能说明**：
修改数据表与分类的映射关系，调整表的分类和级别。

**可编辑内容**：
- 数据分类（从现有分类中选择）
- 数据级别（L1-L4）
- 关键字段（该表中的敏感字段）
- 自动分类标记

**使用步骤**：
1. 切换到"分类映射"标签页
2. 找到要编辑的表映射
3. 点击操作列的"编辑"按钮
4. 修改分类或级别
5. 更新关键字段列表
6. 点击"保存"

**示例**：
```
表名：student_info
数据分类：个人信息
数据级别：L3 - 敏感
关键字段：student_name, id_card, phone, address
自动分类：是
```

## 数据级别说明

### L1 - 公开
- **定义**：可以公开访问的数据
- **示例**：公告、新闻、公开课程信息
- **控制措施**：无特殊限制
- **颜色标识**：🟢 绿色

### L2 - 内部
- **定义**：仅限内部人员访问
- **示例**：内部文档、会议记录、工作计划
- **控制措施**：需要身份认证
- **颜色标识**：🔵 蓝色

### L3 - 敏感
- **定义**：包含敏感信息，需严格控制
- **示例**：个人信息、学生档案、科研数据
- **控制措施**：需要授权 + 数据脱敏
- **颜色标识**：🟡 黄色

### L4 - 机密
- **定义**：高度机密数据，最高级别保护
- **示例**：财务数据、薪资信息、审计报告
- **控制措施**：特殊授权 + 加密 + 审计日志
- **颜色标识**：🔴 红色

## 页面功能

### 统计卡片
显示四个关键指标：
- **数据分类**：已创建的分类总数
- **敏感数据**：L3级别的表数量
- **重要数据**：L4级别的表数量
- **普通数据**：L1和L2级别的表数量

### 标签页
- **数据分类**：查看和管理所有数据分类
- **数据分级**：查看四个级别的定义和统计
- **分类映射**：查看表与分类的映射关系

### 搜索和筛选
- **搜索框**：按分类名称、表名搜索
- **级别筛选**：按数据级别筛选（L1-L4）

## 最佳实践

### 1. 分类命名规范
- 使用清晰、简洁的中文名称
- 编码使用大写字母和下划线
- 保持命名的一致性

### 2. 级别划分原则
- 根据数据敏感程度合理划分
- 考虑法律法规要求
- 参考行业标准和最佳实践

### 3. 定期审查
- 定期复核自动分类结果
- 及时更新分类规则
- 调整不合理的映射关系

### 4. 文档记录
- 记录分类依据和原因
- 说明控制措施的具体内容
- 保持文档的及时更新

## 数据持久化

所有分类和映射数据会自动保存到浏览器的 localStorage 中：
- `data_classification_categories`：分类数据
- `data_classification_mappings`：映射数据

刷新页面后数据不会丢失。

## 常见问题

### Q1: 自动分类不准确怎么办？
A: 自动分类基于字段名匹配，可能存在误判。建议：
1. 使用自动分类作为初步分类
2. 人工复核所有分类结果
3. 手动调整不准确的映射
4. 完善关键字段配置

### Q2: 如何批量修改分类？
A: 目前需要逐个编辑。建议：
1. 先规划好分类体系
2. 使用自动分类批量处理
3. 再进行个别调整

### Q3: 删除分类会影响什么？
A: 删除分类前系统会检查：
- 如果有表使用该分类，无法删除
- 需要先将相关表改为其他分类
- 或删除相关映射关系

### Q4: 修改级别会有什么影响？
A: 修改分类的级别会：
- 自动更新所有使用该分类的表
- 影响数据访问控制策略
- 建议谨慎操作

## 技术支持

如有问题，请：
1. 查看浏览器控制台日志
2. 检查数据格式是否正确
3. 确认必填项是否完整
4. 联系系统管理员

---

**版本**: 1.0.0  
**更新时间**: 2024-10-25  
**功能状态**: ✅ 已完成
